/// <reference types="cypress" />
import VulnerabilityMainContextDataScore from "@/components/contextData/vulnerability/VulnerabilityMainContextDataScore.vue"
import { createPinia } from "pinia"

describe("VulnerabilityMainContextDataScore.vue", () => {
  it("renders with correct score, percentage and name", () => {
    const pinia = createPinia()

    cy.mount(VulnerabilityMainContextDataScore, {
      props: {
        score: 6,
        percentage: 66.67,
        name: "Chaleur"
      },
      global: {
        plugins: [pinia]
      }
    })

    cy.get('[data-cy="context-data-score"]').should("exist")
    cy.contains("vulnérabilité").should("exist")
  })

  it("displays the score value", () => {
    const pinia = createPinia()

    cy.mount(VulnerabilityMainContextDataScore, {
      props: {
        score: 7,
        percentage: 77.78,
        name: "Sécheresse"
      },
      global: {
        plugins: [pinia]
      }
    })

    cy.contains("7").should("exist")
  })

  it("displays the name", () => {
    const pinia = createPinia()

    cy.mount(VulnerabilityMainContextDataScore, {
      props: {
        score: 5,
        percentage: 55.56,
        name: "Inondation"
      },
      global: {
        plugins: [pinia]
      }
    })

    cy.contains("Inondation").should("exist")
  })
})
