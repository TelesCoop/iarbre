<script lang="ts" setup>
import { computed } from "vue"
import { VulnerabilityColor } from "@/utils/vulnerability"
import { useMapStore } from "@/stores/map"

const props = defineProps<{
  color: VulnerabilityColor
  index: number
  name: string
  total: number
}>()
const mapStore = useMapStore()

const isFirst = computed(() => props.index === 1)
const isLast = computed(() => props.index === props.total)
</script>

<template>
  <ScoreLabel
    :key="props.index"
    :clickable="true"
    :data-vulnerability="props.index"
    :is-selected="mapStore.isFiltered(props.index)"
    :label="`${props.index}`"
    :score="props.index"
    :title="`Zone ${props.index} - ${props.name} - Cliquez pour ${mapStore.isFiltered(props.index) ? 'dÃ©sactiver' : 'activer'} le filtre`"
    :class="[
      'flex items-center justify-center',
      isFirst ? 'rounded-l-sm' : '',
      isLast ? 'rounded-r-sm' : '',
      mapStore.isFiltered(props.index) ? 'z-10 relative' : ''
    ]"
    :background-color="props.color"
    @click="() => mapStore.toggleAndApplyFilter(props.index)"
  />
</template>
