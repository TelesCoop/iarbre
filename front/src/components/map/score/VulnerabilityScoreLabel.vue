<script lang="ts" setup>
import { VulnerabilityColor } from "@/utils/vulnerability"
import { useMapStore } from "@/stores/map"

const props = defineProps<{
  color: VulnerabilityColor
  index: number
  name: string
  isFirst?: boolean
  isLast?: boolean
}>()
const mapStore = useMapStore()
</script>

<template>
  <score-label
    :key="props.index"
    :clickable="true"
    :data-vulnerability="props.index"
    :is-selected="mapStore.isFiltered(props.index)"
    :label="`${props.index}`"
    :score="props.index"
    :title="`Zone ${props.index} - ${props.name} - Cliquez pour ${mapStore.isFiltered(props.index) ? 'dÃ©sactiver' : 'activer'} le filtre`"
    :class="[
      'flex items-center justify-center',
      props.isFirst ? 'rounded-l-[3px]' : '',
      props.isLast ? 'rounded-r-[3px]' : ''
    ]"
    :background-color="props.color"
    @click="() => mapStore.toggleAndApplyFilter(props.index)"
  />
</template>
