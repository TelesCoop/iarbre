<script lang="ts" setup>
import { computed } from "vue"

const props = defineProps<{
  score: number | null
  factorId: string
  getScoreColor: (score: number, factorId: string) => string
  getScoreLabel: (score: number, factorId: string) => string
}>()

const tooltipText = computed(() => {
  if (props.score === null) return ""
  return `Score: ${props.score} - ${props.getScoreLabel(props.score, props.factorId)}`
})
</script>

<template>
  <div class="relative" data-cy="vulnerability-context-data-score">
    <div
      v-if="score !== null"
      v-tooltip.top="tooltipText"
      :class="getScoreColor(score, factorId)"
      :data-cy="`vulnerability-context-data-${score}`"
      class="w-4 h-4 rounded-full shadow-lg transform hover:scale-110 transition-transform duration-200 cursor-pointer"
    ></div>
    <div v-else class="w-4 h-4 bg-gray-200 rounded-full"></div>
    <div
      v-if="score !== null && Math.abs(score) >= 2"
      class="absolute -top-0.5 -right-0.5 w-2 h-2 bg-white rounded-full border border-current flex items-center justify-center"
    >
      <div class="w-0.5 h-0.5 bg-current rounded-full"></div>
    </div>
  </div>
</template>
