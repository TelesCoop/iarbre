<script lang="ts" setup>
import { computed } from "vue"
import type { VulnerabilityCategory } from "@/utils/enum"
import { VulnerabilityMode } from "@/utils/vulnerability"
import { getSubVulnerabilityColor } from "@/utils/vulnerability"
import { getAdaptativeColorClass } from "@/utils/color"

const { category, getCategoryScore } = defineProps<{
  category: VulnerabilityCategory
  getCategoryScore: (category: VulnerabilityCategory, mode: VulnerabilityMode) => number | null
}>()

const modes = [VulnerabilityMode.DAY, VulnerabilityMode.NIGHT] as const

const getBackgroundColor = (mode: VulnerabilityMode) => {
  return getSubVulnerabilityColor(getCategoryScore(category, mode) || 0)
}
</script>

<template>
  <div class="col-span-4 flex justify-end items-center gap-2">
    <div v-for="mode in modes" :key="mode" class="flex flex-col items-center gap-1">
      <div
        v-if="getCategoryScore(category, mode) !== null"
        :style="{
          backgroundColor: getBackgroundColor(mode)
        }"
        class="px-2 py-1 rounded text-xs font-bold"
        :class="[getAdaptativeColorClass(getBackgroundColor(mode))]"
      >
        {{ getCategoryScore(category, mode) }} / 3
      </div>
      <div v-else class="px-2 py-1 rounded bg-gray-200 text-gray-500 text-xs">N/A</div>
    </div>
  </div>
</template>
