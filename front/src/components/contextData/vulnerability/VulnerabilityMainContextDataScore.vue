<script lang="ts" setup>
import { computed } from "vue"
import { getVulnerabilityTextColor } from "@/utils/color"

interface VulnerabilityMainScoreProps {
  score: number
  percentage: number
  name: string
}

const props = defineProps<VulnerabilityMainScoreProps>()

const textColor = computed(() => getVulnerabilityTextColor(props.score))
</script>

<template>
  <section class="text-center" aria-labelledby="score-section">
    <h3 id="score-section" class="sr-only">Score de vulnérabilité {{ name }}</h3>

    <div class="relative inline-block">
      <circular-progress
        :percentage="percentage"
        :background-color="textColor"
        :aria-label="`Score de vulnérabilité en journée : ${score} sur 9`"
        data-cy="circular-progress"
      />

      <div class="absolute inset-0 flex flex-col items-center justify-center">
        <span class="text-sm text-gray-600">{{ name }}:</span>
        <span
          class="text-xl md:text-3xl font-bold"
          :class="textColor"
          data-cy="vulnerability-score"
        >
          {{ score }}/9
        </span>
      </div>
    </div>
  </section>
</template>
